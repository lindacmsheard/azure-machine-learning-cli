$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
type: command

name: get_planetary_data
display_name: Get Planetary Computer URLs
version: 1

inputs:
  aoi:
    type: string
    default: "[[[-148.56536865234375, 60.80072385643073], [-147.44338989257812, 60.80072385643073], [-147.44338989257812, 61.18363894915102], [-148.56536865234375, 61.18363894915102], [-148.56536865234375, 60.80072385643073]]]" 
  aoi_type:
    type: string
    default: "Polygon"
  toi:
    type: string
    default: "2019-06-01/2019-08-01"
  collections:
    type: string
    default: '["sentinel-2-l2a"]'
  query:
    type: string
    default: '{"eo:cloud_cover": {"lt": 10}}'

outputs:
  output_location:
    type: uri_folder

code: ./src

environment: 
  image: continuumio/miniconda3:latest
  conda_file: ./conda.yml

command: >-
  python main.py 
  --aoi ${{inputs.aoi}}
  --aoi_type ${{inputs.aoi_type}} 
  --toi ${{inputs.toi}}
  --collections ${{inputs.collections}} 
  --query ${{inputs.query}}
  --output_location ${{outputs.output_location}}